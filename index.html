<!DOCTYPE HTML>
<html>
<head>
	<title>Hello World</title>
	
	<style>
	#template{
			display: none;
	}
	</style>
</head>
<body>
	<h1>Hello World</h1>
	<div id='wrapper'>
	<input type='button' id='readPage' value='Read' /> <input type='button' id='createPage' value='Create' />
	<h2>View Data</h2>
	<ul id='container-read'></ul>
	</div>
	<div id='template'>
		<ul class='list-read'><li></li></ul>
		<form id='form-create'>
			<h2>Create Data</h2>
			nickname: <input type='text' name='nickname' id='nickname' value='Joe' />
			age: <input type='text' name='age' id='age' value='20' />
			<input type='button' name='create' id='create' value='Create' />
		</form>
		<form id='form-update'>
			<h2>Update Data</h2>
			<input type='hidden' name='id' id='id' value='' />
			nickname: <input type='text' name='nickname' id='nickname' value='Joe' />
			age: <input type='text' name='age' id='age' value='20' />
			<input type='button' name='update' id='update' value='Update' />
		</form>
	</div>
	<script src='js/jquery.js'></script>
	<script src='js/underscore-min.js'></script>
	<script src='js/backbone.js'></script>
	<script>
	(function($){
	var Student={};
	Student.Model=Backbone.Model.extend({});
	Student.Collection=Backbone.Collection.extend({
		model: Student.Model,
		url: 'mysql.php?zone=read',
		initialize: function(){
			console.log('Collection')
		}
	});
	Student.View=Backbone.View.extend({
		el: $('#container-read'),
		initialize: function(){
			console.log('View');
        	this.collection.bind('reset', this.render, this);
		},
		html:'underfind',
		render: function(){
			var self=this;
			console.log(this.collection.length)
			this.collection.each(
				function(model){
					self.el.load('item.html', function(html){
						self.el.html(_.template(html, model.toJSON()));
					});
				}
			);
		}
	});
	Student.Router=Backbone.Router.extend({
		routes: {
			'': 'defaultRoute'
		},
		defaultRoute: function(){
			console.log('defaultRoute');
			var collection=new Student.Collection();
			new Student.View({collection: collection});
			collection.fetch();
       		console.log(collection.length)
		}
	})
	var appRouter=new Student.Router();
	Backbone.history.start();
	})(jQuery);
   </script>
</body>
</html>
